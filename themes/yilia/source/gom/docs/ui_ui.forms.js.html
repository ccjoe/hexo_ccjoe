<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ui/ui.forms.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">首页 Home</a></h2><h3>类Classes</h3><ul><li><a href="Gom.html">Gom</a><ul class='methods'><li data-type='method'><a href="Gom.html#.Utils">Utils</a></li></ul></li><li><a href="Gom.App.html">App</a><ul class='methods'><li data-type='method'><a href="Gom.App.html#getCRO">getCRO</a></li><li data-type='method'><a href="Gom.App.html#getLastHashByLastIndex">getLastHashByLastIndex</a></li><li data-type='method'><a href="Gom.App.html#goto">goto</a></li><li data-type='method'><a href="Gom.App.html#run">run</a></li><li data-type='method'><a href="Gom.App.html#setCRO">setCRO</a></li></ul></li><li><a href="Gom.Page.html">Page</a><ul class='methods'><li data-type='method'><a href="Gom.Page.html#destory">destory</a></li><li data-type='method'><a href="Gom.Page.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.Page.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.Page.html#offview">offview</a></li><li data-type='method'><a href="Gom.Page.html#onview">onview</a></li><li data-type='method'><a href="Gom.Page.html#push">push</a></li><li data-type='method'><a href="Gom.Page.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.Page.html#render">render</a></li><li data-type='method'><a href="Gom.Page.html#setHeader">setHeader</a></li><li data-type='method'><a href="Gom.Page.html#setSeo">setSeo</a></li><li data-type='method'><a href="Gom.Page.html#show">show</a></li><li data-type='method'><a href="Gom.Page.html#update">update</a></li></ul></li><li><a href="Gom.Service.html">Service</a><ul class='methods'><li data-type='method'><a href="Gom.Service.html#ajax">ajax</a></li><li data-type='method'><a href="Gom.Service.html#fetch">fetch</a></li><li data-type='method'><a href="Gom.Service.html#get">get</a></li><li data-type='method'><a href="Gom.Service.html#jsonp">jsonp</a></li><li data-type='method'><a href="Gom.Service.html#post">post</a></li><li data-type='method'><a href="Gom.Service.html#save">save</a></li><li data-type='method'><a href="Gom.Service.html#tmpl">tmpl</a></li></ul></li><li><a href="Gom.UI.html">UI</a></li><li><a href="Gom.UI.Button.html">Button</a><ul class='methods'><li data-type='method'><a href="Gom.UI.Button.html#destory">destory</a></li><li data-type='method'><a href="Gom.UI.Button.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.UI.Button.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.UI.Button.html#offview">offview</a></li><li data-type='method'><a href="Gom.UI.Button.html#onview">onview</a></li><li data-type='method'><a href="Gom.UI.Button.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.UI.Button.html#render">render</a></li><li data-type='method'><a href="Gom.UI.Button.html#show">show</a></li><li data-type='method'><a href="Gom.UI.Button.html#update">update</a></li></ul></li><li><a href="Gom.UI.Form.html">Form</a><ul class='methods'><li data-type='method'><a href="Gom.UI.Form.html#destory">destory</a></li><li data-type='method'><a href="Gom.UI.Form.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.UI.Form.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.UI.Form.html#getStore">getStore</a></li><li data-type='method'><a href="Gom.UI.Form.html#offview">offview</a></li><li data-type='method'><a href="Gom.UI.Form.html#onview">onview</a></li><li data-type='method'><a href="Gom.UI.Form.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.UI.Form.html#render">render</a></li><li data-type='method'><a href="Gom.UI.Form.html#setStore">setStore</a></li><li data-type='method'><a href="Gom.UI.Form.html#show">show</a></li><li data-type='method'><a href="Gom.UI.Form.html#update">update</a></li></ul></li><li><a href="Gom.UI.Header.html">Header</a><ul class='methods'><li data-type='method'><a href="Gom.UI.Header.html#destory">destory</a></li><li data-type='method'><a href="Gom.UI.Header.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.UI.Header.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.UI.Header.html#offview">offview</a></li><li data-type='method'><a href="Gom.UI.Header.html#onview">onview</a></li><li data-type='method'><a href="Gom.UI.Header.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.UI.Header.html#render">render</a></li><li data-type='method'><a href="Gom.UI.Header.html#setTitle">setTitle</a></li><li data-type='method'><a href="Gom.UI.Header.html#setTitle">setTitle</a></li><li data-type='method'><a href="Gom.UI.Header.html#show">show</a></li><li data-type='method'><a href="Gom.UI.Header.html#update">update</a></li></ul></li><li><a href="Gom.UI.InputLocation.html">InputLocation</a><ul class='methods'><li data-type='method'><a href="Gom.UI.InputLocation.html#destory">destory</a></li><li data-type='method'><a href="Gom.UI.InputLocation.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.UI.InputLocation.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.UI.InputLocation.html#offview">offview</a></li><li data-type='method'><a href="Gom.UI.InputLocation.html#onview">onview</a></li><li data-type='method'><a href="Gom.UI.InputLocation.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.UI.InputLocation.html#render">render</a></li><li data-type='method'><a href="Gom.UI.InputLocation.html#show">show</a></li><li data-type='method'><a href="Gom.UI.InputLocation.html#update">update</a></li></ul></li><li><a href="Gom.UI.List.html">List</a><ul class='methods'><li data-type='method'><a href="Gom.UI.List.html#destory">destory</a></li><li data-type='method'><a href="Gom.UI.List.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.UI.List.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.UI.List.html#offview">offview</a></li><li data-type='method'><a href="Gom.UI.List.html#onview">onview</a></li><li data-type='method'><a href="Gom.UI.List.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.UI.List.html#render">render</a></li><li data-type='method'><a href="Gom.UI.List.html#show">show</a></li><li data-type='method'><a href="Gom.UI.List.html#update">update</a></li></ul></li><li><a href="Gom.UI.Modal.html">Modal</a><ul class='methods'><li data-type='method'><a href="Gom.UI.Modal.html#.alert">alert</a></li><li data-type='method'><a href="Gom.UI.Modal.html#.bottom">bottom</a></li><li data-type='method'><a href="Gom.UI.Modal.html#.bottom">bottom</a></li><li data-type='method'><a href="Gom.UI.Modal.html#.center">center</a></li><li data-type='method'><a href="Gom.UI.Modal.html#.confirm">confirm</a></li><li data-type='method'><a href="Gom.UI.Modal.html#.layout">layout</a></li><li data-type='method'><a href="Gom.UI.Modal.html#.loading">loading</a></li><li data-type='method'><a href="Gom.UI.Modal.html#.popover">popover</a></li><li data-type='method'><a href="Gom.UI.Modal.html#.tips">tips</a></li><li data-type='method'><a href="Gom.UI.Modal.html#.top">top</a></li><li data-type='method'><a href="Gom.UI.Modal.html#autoHide">autoHide</a></li><li data-type='method'><a href="Gom.UI.Modal.html#destory">destory</a></li><li data-type='method'><a href="Gom.UI.Modal.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.UI.Modal.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.UI.Modal.html#getMask">getMask</a></li><li data-type='method'><a href="Gom.UI.Modal.html#getModal">getModal</a></li><li data-type='method'><a href="Gom.UI.Modal.html#getType">getType</a></li><li data-type='method'><a href="Gom.UI.Modal.html#offview">offview</a></li><li data-type='method'><a href="Gom.UI.Modal.html#onview">onview</a></li><li data-type='method'><a href="Gom.UI.Modal.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.UI.Modal.html#render">render</a></li><li data-type='method'><a href="Gom.UI.Modal.html#show">show</a></li><li data-type='method'><a href="Gom.UI.Modal.html#toggleModal">toggleModal</a></li><li data-type='method'><a href="Gom.UI.Modal.html#update">update</a></li></ul></li><li><a href="Gom.UI.Radio.html">Radio</a><ul class='methods'><li data-type='method'><a href="Gom.UI.Radio.html#fresh">fresh</a></li><li data-type='method'><a href="Gom.UI.Radio.html#fresh">fresh</a></li><li data-type='method'><a href="Gom.UI.Radio.html#fresh">fresh</a></li><li data-type='method'><a href="Gom.UI.Radio.html#getItem">getItem</a></li><li data-type='method'><a href="Gom.UI.Radio.html#getItem">getItem</a></li></ul></li><li><a href="Gom.UI.Scroll.html">Scroll</a><ul class='methods'><li data-type='method'><a href="Gom.UI.Scroll.html#getSteps">getSteps</a></li><li data-type='method'><a href="Gom.UI.Scroll.html#hideFresh">hideFresh</a></li><li data-type='method'><a href="Gom.UI.Scroll.html#scrollTo">scrollTo</a></li><li data-type='method'><a href="Gom.UI.Scroll.html#showFresh">showFresh</a></li></ul></li><li><a href="Gom.UI.Select.html">Select</a><ul class='methods'><li data-type='method'><a href="Gom.UI.Select.html#destory">destory</a></li><li data-type='method'><a href="Gom.UI.Select.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.UI.Select.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.UI.Select.html#getSelect">getSelect</a></li><li data-type='method'><a href="Gom.UI.Select.html#offview">offview</a></li><li data-type='method'><a href="Gom.UI.Select.html#onview">onview</a></li><li data-type='method'><a href="Gom.UI.Select.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.UI.Select.html#render">render</a></li><li data-type='method'><a href="Gom.UI.Select.html#show">show</a></li><li data-type='method'><a href="Gom.UI.Select.html#update">update</a></li></ul></li><li><a href="Gom.UI.Sides.html">Sides</a><ul class='methods'><li data-type='method'><a href="Gom.UI.Sides.html#destory">destory</a></li><li data-type='method'><a href="Gom.UI.Sides.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.UI.Sides.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.UI.Sides.html#getSides">getSides</a></li><li data-type='method'><a href="Gom.UI.Sides.html#hide">hide</a></li><li data-type='method'><a href="Gom.UI.Sides.html#offview">offview</a></li><li data-type='method'><a href="Gom.UI.Sides.html#onview">onview</a></li><li data-type='method'><a href="Gom.UI.Sides.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.UI.Sides.html#render">render</a></li><li data-type='method'><a href="Gom.UI.Sides.html#setContent">setContent</a></li><li data-type='method'><a href="Gom.UI.Sides.html#show">show</a></li><li data-type='method'><a href="Gom.UI.Sides.html#update">update</a></li></ul></li><li><a href="Gom.UI.Slide.html">Slide</a><ul class='methods'><li data-type='method'><a href="Gom.UI.Slide.html#destory">destory</a></li><li data-type='method'><a href="Gom.UI.Slide.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.UI.Slide.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.UI.Slide.html#offview">offview</a></li><li data-type='method'><a href="Gom.UI.Slide.html#onview">onview</a></li><li data-type='method'><a href="Gom.UI.Slide.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.UI.Slide.html#render">render</a></li><li data-type='method'><a href="Gom.UI.Slide.html#show">show</a></li><li data-type='method'><a href="Gom.UI.Slide.html#update">update</a></li></ul></li><li><a href="Gom.UI.Toggle.html">Toggle</a><ul class='methods'><li data-type='method'><a href="Gom.UI.Toggle.html#destory">destory</a></li><li data-type='method'><a href="Gom.UI.Toggle.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.UI.Toggle.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.UI.Toggle.html#offview">offview</a></li><li data-type='method'><a href="Gom.UI.Toggle.html#onview">onview</a></li><li data-type='method'><a href="Gom.UI.Toggle.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.UI.Toggle.html#render">render</a></li><li data-type='method'><a href="Gom.UI.Toggle.html#show">show</a></li><li data-type='method'><a href="Gom.UI.Toggle.html#update">update</a></li></ul></li><li><a href="Gom.View.html">View</a><ul class='methods'><li data-type='method'><a href="Gom.View.html#.template">template</a></li><li data-type='method'><a href="Gom.View.html#destory">destory</a></li><li data-type='method'><a href="Gom.View.html#getHTMLFragment">getHTMLFragment</a></li><li data-type='method'><a href="Gom.View.html#getHTMLTmpl">getHTMLTmpl</a></li><li data-type='method'><a href="Gom.View.html#offview">offview</a></li><li data-type='method'><a href="Gom.View.html#onview">onview</a></li><li data-type='method'><a href="Gom.View.html#refreshEvent">refreshEvent</a></li><li data-type='method'><a href="Gom.View.html#render">render</a></li><li data-type='method'><a href="Gom.View.html#show">show</a></li><li data-type='method'><a href="Gom.View.html#update">update</a></li></ul></li></ul><h3>命名空间 Namespaces</h3><ul><li><a href="store.html">store</a><ul class='methods'><li data-type='method'><a href="store.html#.del">del</a></li><li data-type='method'><a href="store.html#.del">del</a></li><li data-type='method'><a href="store.html#.each">each</a></li><li data-type='method'><a href="store.html#.get">get</a></li><li data-type='method'><a href="store.html#.has">has</a></li><li data-type='method'><a href="store.html#.noexpire">noexpire</a></li><li data-type='method'><a href="store.html#.size">size</a></li></ul></li><li><a href="url.html">url</a><ul class='methods'><li data-type='method'><a href="url.html#.getHashPath">getHashPath</a></li><li data-type='method'><a href="url.html#.getHashSearch">getHashSearch</a></li><li data-type='method'><a href="url.html#.getHTML5Hash">getHTML5Hash</a></li><li data-type='method'><a href="url.html#.getParams">getParams</a></li><li data-type='method'><a href="url.html#.getUrl">getUrl</a></li><li data-type='method'><a href="url.html#.set">set</a></li><li data-type='method'><a href="url.html#.setParam">setParam</a></li></ul></li></ul><h3>Global 全局</h3><ul><li><a href="global.html#easingMap">easingMap</a></li><li><a href="global.html#re">re</a></li><li><a href="global.html#storage">storage</a></li><li><a href="global.html#swipe">swipe</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">ui/ui.forms.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as Url from '../utils/url';
import Store from '../utils/store';
import District from './business/ui.select-district';
import View from '../core/view';

var defaultsBtns = {
    type: 'primary',    //primary, positive, negative, link
    outline: false, //true/false
    icon: void 0, //icon className
    badge: void 0, //number || false
    title: ''
};
/**
 * @class Gom.UI.Button
 * @alias Button
 * @extends {Gom.View}
 * @param {object} opts 参数列表
 * @param {object} [opts.wrapper] 组件根元素 固定值opts.replace = true 替换组件根元素wrapper
 * @param {object} [opts.data]  组件数据相关
 * @param {string} [opts.data.type='primary'] Button类型,可选有primary, positive, negative, link
 * @param {boolean} [opts.data.outline=false] 是否有外边
 * @param {string|Undefined} [opts.data.icon] icon className
 * @param {string|Undefined} [opts.data.badge] 显示小数字
 * @param {string} opts.data.title 标题
 * @example
 * &lt;div data-ui-widget="Button" data-opts='{"type":"negative", "badge": 10, "icon": "icon-search", "isblock": true}'>Text&lt;/div>
 * 或
 * new Button({data: opts, wrapper: '.class'});
 */
class Button extends View {
    constructor(opts) {
        opts.data = Object.assign({}, defaultsBtns, opts.data);
        opts.tmplname = 'ui.button';
        opts.replace = true;
        super(opts);
    }
}

/**
 * 在ios的UI里toggle里是没有文字的，在android里是有的，这里暂时按ios里UI
 * @class Gom.UI.Toggle
 * @alias Toggle
 * @extends {Gom.View}
 * @param {object} opts
 */
class Toggle extends View {
    constructor(opts) {
        opts.tmpl = '&lt;div class="toggle">&lt;div class="toggle-handle">&lt;/div>&lt;/div>';
        opts.replace = true;
        super(opts);
    }

    /**
     * 根据表单的值刷新视图
     * @method Gom.UI.Radio#fresh
     */
    fresh() {
        var $wp = this.wrapper,
            has = $wp.prev().filter('input:hidden').val();
        $wp[(has == 'true' ? 'add' : 'remove') + 'Class']('active');
    }

    show() {
        var $wp = this.wrapper, has;
        $wp.on('click', '.toggle-handle', function () {
            has = $wp.hasClass('active');
            $wp[(has ? 'remove' : 'add') + 'Class']('active');
            $wp.prev().filter('input:hidden').val(!has).trigger('blur'); //触发blur是为了触发form的store机制
        });
        $wp.find('.toggle-handle').swipeLeft({
            endCallback (){
                $wp.removeClass('active');
            }
        }).swipeRight({
            endCallback (){
                $wp.addClass('active');
            }
        });

        this.fresh();
    }
}

/**
 * @class Gom.UI.Radio
 * @alias Forms.CheckBox
 * @param {object} opts 参列
 * @param {string} [opts.data.position=right] 左右
 **/
class CheckBox extends View {
    constructor(opts) {
        var data = opts.data;
        data.position = data.position || 'right';
        opts.events = {
            'click .item': function (e, item, that) {
                that.selectItem(item, true);
            }
        };
        super(opts);
        this.initCheck();

    }

    initCheck() {
        var $el = this.wrapper, pos = this.data.position;
        $el.addClass('gom-checkbox gom-checkbox-' + pos);
    }

    show() {
        this.fresh();
    }

    /**
     * 根据值刷新视图
     * @method Gom.UI.Radio#fresh
     */
    fresh() {
        let that = this, val = this.getInput().val().split(','), $i, $ival;
        this.getItems().each(function (i, item) {
            $i = $(item);
            $ival = String($i.data('keyval'));
            if (!!~val.indexOf($ival)) {
                that.selectItem($i, false, true);
            }
        });
    }

    getInput() {
        return this.wrapper.find('input:hidden');
    }

    /**
     * 获取CheckBox子项集
     * @method Gom.UI.Radio#getItem
     * @returns {*}
     */
    getItems() {
        return this.wrapper.find('.item');
    }

    /**
     * 选择某项
     * @method Gom.UI.CheckBox#selectItem
     * @param {element} current item元素
     * @param {boolean} storeIt 是否触发存储
     * @param {boolean} ingore 强制选中，不管之前的状态
     */
    selectItem(current, storeIt, ingore) {
        let $t = $(current),
            has = $t.hasClass('active');
        if (ingore) has = false;
        $t[has ? 'removeClass' : 'addClass']('active');
        if (storeIt) {
            this.getInput().val(this.getVals()).trigger('blur');
        }
        return false;
    }

    /**
     * 获取Radio的选择结果的元素，没有直接获取值是因为在实际的开发中一般不是为了获取选中的文本，也许是ID，获取元素再根据元素获取想要的key的值
     * @method Gom.UI.CheckBox#getVals
     */
    getVals() {
        var vals = [];
        this.getItems().filter('.active').each(function (i, item) {
            vals.push($(item).data('keyval'));
        });
        return vals;
    }
}
/**
 * @class Gom.UI.Radio
 * @alias Forms.Radio
 * @param {object} opts 参列
 * @param {string} [opts.data.position=right] 选择框位于左右
 **/
class Radio extends View {
    constructor(opts) {
        var data = opts.data;
        data.position = data.position || 'right';
        opts.events = {
            'click .item': function (e, item, that) {
                that.selectItem(item);
            }
        };
        super(opts);
        this.initRadio();
    }

    initRadio() {
        var $el = this.wrapper, pos = this.data.position;
        $el.addClass('gom-radio gom-radio-' + pos);
    }

    /**
     * 根据值刷新视图
     * @method Gom.UI.Radio#fresh
     */
    fresh() {
        let that = this, val = this.getInput().val();
        this.getItems().each(function (i, item) {
            if ($(item).data('keyval') == val) {
                that.selectItem(item);
            }
        });
    }

    show() {
        this.fresh();
    }

    getInput() {
        return this.wrapper.find('input:hidden');
    }

    /**
     * 获取Radio子项集
     * @method Gom.UI.Radio#getItem
     */
    getItems() {
        return this.wrapper.find('.item');
    }

    selectItem(current) {
        var $t = $(current),
            $sb = $t.siblings(),
            $sbinput = this.getInput(),
            val = $t.data('keyval');
        $t.addClass('active');
        $sb.removeClass('active');
        $sbinput.val(val).trigger('blur');
        return false;
    }
}

/**
 * 在ios的UI里toggle里是没有文字的，在android里是有的，这里暂时按ios里UI
 * @class Gom.UI.InputLocation
 * @alias InputLocation
 * @extends {Gom.View}
 * @param {object} opts 参列
 * @param {object} opts.name 获取区域的表单的name值
 * @param {object} opts.onLocation 获取到地址时回调
 */
class InputLocation extends View {
    constructor(opts) {
        var data = opts.data;
        data.name = data.name || 'location';
        opts.tmpl = '&lt;div>&lt;input type="text" readonly class="input" name="' + opts.data.name + '" placeholder="定位或选择" />&lt;span class="icon-area">&lt;i class="iconfont icon-location">定位&lt;/i>&lt;/span>&lt;/div>';
        opts.events = {
            'click .icon-area': 'getCoord',
            'click input': 'selectLocation'
        };
        super(opts);
    }

    getInput() {
        return this.wrapper.find('input');
    }

    selectLocation() {
        District();
    }

    /**
     *通过html5获取地理坐标
     */
    getCoord() {
        let that = this, geo = navigator.geolocation;
        if (!geo) {
            return;
        }
        geo.getCurrentPosition(function (position) {
            InputLocation.location(position.coords, config.mapkey || '0b895f63ca21c9e82eb158f46fe7f502', function (addr) {
                that.getInput().val(addr.province + addr.city + addr.district);
                that.onLocation ? that.onLocation(addr) : null;
            });
        });
    }

    /**
     * 通过GD key及coord找到对应的位置字符串
     * @param {object} coord 坐标
     * @param {number} coord.longitude 坐标
     * @param {object} coord.latitude  坐标
     * @param {string} key  GD地图key
     * @param {function} callback 回调
     */
    static location (coord, key, callback) {
        var gdAddr = 'http://restapi.amap.com/v3/geocode/regeo?key=' + key + '&amp;location=' + coord.longitude + ',' + coord.latitude + '&amp;output=json';
        $.ajax({
            url: gdAddr,
            dataType: 'jsonp',
            success (data){
                if (data.info === 'OK') {
                    var addr = data.regeocode.addressComponent;
                    callback ? callback(addr) : null;
                    console.log(addr);
                }
            }
        });
    }
}

var defaultsForms = {
    store: true
};
/**
 * 在Form层对form进行一些处理【比如store为true的form会自动存储表单值，刷新会读取】
 * 需要注意的间，原生表单需要指定name, 自定义的组件类表单 需要在组件前加一个隐藏域
 * 如使用&lt;input type="hidden" name="test">实现form值的序列化
 * 没有的话将不能本地存储,需要手动取值
 * @class Gom.UI.Form
 * @alias Form
 * @extends {Gom.View}
 * @param {object} opts 参列
 */
class Form extends View {
    constructor(opts) {
        opts.data = Object.assign({}, defaultsForms, opts.data);
        opts.wrapper = opts.wrapper ? $(opts.wrapper) : null;
        opts.events = {
            'blur input,select': function (e, current, that) {
                that.setStore();
            }
        };
        super(opts);
        this.inputStore();
        //监听所有表单的变化
    }

    /**
     * 将根据hash和id存储localStorage
     * @method Gom.UI.Form#setStore
     */
    setStore() {
        var $el = this.wrapper, thisId = $el[0].id;
        var hash = Url.getHTML5Hash(location.search) || '/';
        if (!thisId) {
            console.warn('Form ID is required');
            return;
        }
        var expires = config.EXPIRES ? config.EXPIRES : 24 * 3600 * 1000;
        Store.set(hash + '_' + thisId, $el.serialize(), expires);
        console.log(this.getStore(true));
    }

    /**
     * 从localStorage取出数据
     * @method Gom.UI.Form#getStore
     * @param {boolean} isParse  为ture时返回的是对象,否则为string
     */
    getStore(isParse) {
        var $el = this.wrapper, thisId = $el[0].id;
        var hash = Url.getHTML5Hash(location.search) || '/';
        var getSval = Store.get(hash + '_' + thisId);
        return isParse ? Url.getParams(decodeURIComponent(getSval)) : getSval;
    }

    /**
     *将 serialize的值写入相应的form
     */
    inputStore() {
        var gets = this.getStore(true);
        for (var name in gets) {
            this.wrapper.find('[name=' + name + ']').val(gets[name]);
        }
    }
}

export {Button, Toggle, CheckBox, Radio, InputLocation, Form};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.0-dev</a> on Sun Jan 17 2016 16:54:24 GMT+0800 (CST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
